!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(self,(function(){return(()=>{"use strict";var e={62:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0});var i,r=n(607);location.href.indexOf("?accept")>-1&&(i=new Peer).on("open",(function(t){history.replaceState(null,"","?id=".concat(t)),i.on("connection",(function(t){var e=new s;t.on("data",(function(t){e.processData(t)}))}))})),location.href.indexOf("?id")>-1&&function(){var t=new Peer;t.on("open",(function(){var e=location.href.split("?id=")[1],n=t.connect(e,{reliable:!0});n.on("open",(function(){n.send("start remote control");var t=new o(n),e=document.getElementById("btnReset");e&&(e.style.display="block",e.addEventListener("click",(function(){t.reset()})))}))}))}();var o=function(){function t(t){var e=this;this.currentAngle=[0,0],this.resetAngle=[0,0],this.conn=t,window.addEventListener("deviceorientation",(function(t){var n,i,r=null!==(n=t.alpha)&&void 0!==n?n:0,o=null!==(i=t.beta)&&void 0!==i?i:0;e.currentAngle[0]=r>180?r-360:r,e.currentAngle[1]=o,e.conn.send([(e.currentAngle[0]-e.resetAngle[0])/15*180,(e.currentAngle[1]-e.resetAngle[1])/15*180])}),!1)}return t.prototype.reset=function(){this.conn.send("reset"),this.resetAngle[0]=this.currentAngle[0],this.resetAngle[1]=this.currentAngle[1]},t}(),s=function(){function t(){this.cvsDom=document.querySelector("#cvs"),this.ctx=this.cvsDom.getContext("2d"),this.cvsWidth=this.cvsDom.width,this.cvsHeight=this.cvsDom.height,this.mouseTrack=[],this.reset(),this.draw()}return t.prototype.processData=function(t){if("string"==typeof t)"reset"===t?this.reset():alert(t);else{var e={x:this.cvsWidth/2-t[0],y:this.cvsHeight/2-t[1],time:Date.now()};this.mouseTrack.push(e)}},t.prototype.reset=function(){this.mouseTrack.length=0},t.prototype.draw=function(){var t=this;this.ctx.clearRect(0,0,this.cvsWidth,this.cvsHeight),this.mouseTrack=(0,r.drainPoints)(this.mouseTrack),this.mouseTrack.length>=3&&(0,r.drawLaserPen)(this.ctx,this.mouseTrack),requestAnimationFrame((function(){t.draw()}))},t}()},607:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.drawLaserPen=e.drawRoundCap=e.drawDrawingBezierData=e.calDrawingData=e.transformPointToBezier=e.calControlPoints=e.drainPoints=e.setRoundCap=e.setColor=e.setOpacity=e.setTension=e.setMinWidth=e.setMaxWidth=e.setDelay=void 0;var i=n(405),r=10,o=0,s=300,c=.3,a=0,u=255,l=0,h=0,x=!1;function y(t,e){return Math.sqrt(t*t+e*e)}e.setDelay=function(t){s=t},e.setMaxWidth=function(t){r=t},e.setMinWidth=function(t){o=t},e.setTension=function(t){c=t},e.setOpacity=function(t){a=t},e.setColor=function(t,e,n){u=t,l=e,h=n},e.setRoundCap=function(t){x=t},e.drainPoints=function(t){for(var e,n=Date.now()-s,i=0;i<t.length;i++)if(t[i].time>=n){e=i;break}var r=0===e?t:void 0===e?[]:t.slice(e);for(i=r.length-1;i>0;i--)(o=r[i]).x===r[i-1].x&&o.y===r[i-1].y&&r.splice(i,1);for(i=r.length-1;i>1;i--){var o;(o=r[i]).x===r[i-2].x&&o.y===r[i-2].y&&(r.splice(i-1,2),i--)}return r},e.calControlPoints=function(t){if(t.length<3)throw new Error("to calculate control points, the point counts should be larger than 3");for(var e=Array(t.length),n=t.length,i=n-2;i>0;i--){var r=t[i],o=t[i+1],s=t[i-1],a=s.x-o.x,u=s.y-o.y,l=y(a,u),h=a/l,x=u/l,f=y(r.x-o.x,r.y-o.y),p=y(r.x-s.x,r.y-s.y),d=r.x-h*f*c,g=r.y-x*f*c,m=r.x+h*p*c,v=r.y+x*p*c;e[i]={cn:{x:d,y:g},cp:{x:m,y:v}},(isNaN(d)||isNaN(g)||isNaN(m)||isNaN(v))&&console.log("a")}return e[n-1]={cn:{x:t[n-1].x,y:t[n-1].y},cp:{x:(t[n-1].x+t[n-2].x)/2,y:(t[n-1].y+t[n-2].y)/2}},e[0]={cn:{x:(t[0].x+t[i+1].x)/2,y:(t[0].y+t[i+1].y)/2},cp:{x:t[0].x,y:t[0].y}},e},e.transformPointToBezier=function(t,e){for(var n=[],r=1;r<t.length;r++){var o=t[r-1],s=t[r],c=e[r-1].cn,a=e[r].cp,u=new i.Bezier(o.x,o.y,c.x,c.y,a.x,a.y,s.x,s.y);n.push(u)}return n},e.calDrawingData=function(t,e){for(var n=[],i=1-a,s=r-o,c=0,u=0;u<t.length;u++){var l=t[u],h=l.length(),x=a+(c+=h)/e*i,y=o+c/e*s;n.push({bezier:l,opacity:x,width:y})}return n},e.drawDrawingBezierData=function(t,e){t.save(),t.lineCap="butt";for(var n=0;n<e.length;n++){t.beginPath();var i=e[n],r=i.bezier,o=i.width,s=i.opacity;t.lineWidth=o,t.strokeStyle="rgba(".concat(u,",").concat(l,",").concat(h,",").concat(s,")");var c=r.points[0].x,a=r.points[0].y;if(r.points[0].x!==r.points[1].x){var x=r.points[0].x,y=r.points[0].y,f=(y-r.points[1].y)/(x-r.points[1].x),p=y-f*x,d=Math.sqrt(.005/(1+f*f));a=f*(c=(r.points[1].x>x?-d:d)+x)+p}else a+=r.points[0].y>r.points[1].y?.005:-.005;var g=r.points[3].x,m=r.points[3].y;if(r.points[2].x!==r.points[3].x){var v=r.points[3].x,z=r.points[3].y,b=(z-r.points[2].y)/(v-r.points[2].x),_=z-b*v;d=Math.sqrt(.005/(1+b*b)),m=b*(g=(r.points[2].x>v?-d:d)+v)+_}else m+=r.points[2].y>r.points[3].y?-.005:.005;t.moveTo(c,a),t.bezierCurveTo(r.points[1].x,r.points[1].y,r.points[2].x,r.points[2].y,g,m),t.stroke(),t.closePath()}t.restore()},e.drawRoundCap=function(t,e){var n=e.bezier.points[3];t.save(),t.beginPath(),t.fillStyle="rgba(".concat(u,",").concat(l,",").concat(h,",").concat(e.opacity,")"),t.arc(n.x,n.y,e.width/2,0,2*Math.PI,!1),t.closePath(),t.fill(),t.restore()},e.drawLaserPen=function(t,n){if(n.length<3)throw new Error("too less points");var i=(0,e.calControlPoints)(n),r=(0,e.transformPointToBezier)(n,i),o=r.reduce((function(t,e){return t+e.length()}),0),s=o/50,c=[];r.forEach((function(t,e){var n=t.length(),i=Math.ceil(n/s)+2,o=t.getLUT(i);e<r.length-1&&o.pop(),c.push.apply(c,o)}));var a=(0,e.calControlPoints)(c),u=(0,e.transformPointToBezier)(c,a),l=(0,e.calDrawingData)(u,o);(0,e.drawDrawingBezierData)(t,l),x&&(0,e.drawRoundCap)(t,l[l.length-1])}},405:(e,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Bezier=void 0;const{abs:i,cos:r,sin:o,acos:s,atan2:c,sqrt:a,pow:u}=Math;function l(t){return t<0?-u(-t,1/3):u(t,1/3)}const h=Math.PI,x=2*h,y=h/2,f=Number.MAX_SAFE_INTEGER||9007199254740991,p=Number.MIN_SAFE_INTEGER||-9007199254740991,d={x:0,y:0,z:0},g={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(t,e){const n=e(t);let i=n.x*n.x+n.y*n.y;return void 0!==n.z&&(i+=n.z*n.z),a(i)},compute:function(t,e,n){if(0===t)return e[0].t=0,e[0];const i=e.length-1;if(1===t)return e[i].t=1,e[i];const r=1-t;let o=e;if(0===i)return e[0].t=t,e[0];if(1===i){const e={x:r*o[0].x+t*o[1].x,y:r*o[0].y+t*o[1].y,t};return n&&(e.z=r*o[0].z+t*o[1].z),e}if(i<4){let e,s,c,a=r*r,u=t*t,l=0;2===i?(o=[o[0],o[1],o[2],d],e=a,s=r*t*2,c=u):3===i&&(e=a*r,s=a*t*3,c=r*u*3,l=t*u);const h={x:e*o[0].x+s*o[1].x+c*o[2].x+l*o[3].x,y:e*o[0].y+s*o[1].y+c*o[2].y+l*o[3].y,t};return n&&(h.z=e*o[0].z+s*o[1].z+c*o[2].z+l*o[3].z),h}const s=JSON.parse(JSON.stringify(e));for(;s.length>1;){for(let e=0;e<s.length-1;e++)s[e]={x:s[e].x+(s[e+1].x-s[e].x)*t,y:s[e].y+(s[e+1].y-s[e].y)*t},void 0!==s[e].z&&(s[e]=s[e].z+(s[e+1].z-s[e].z)*t);s.splice(s.length-1,1)}return s[0].t=t,s[0]},computeWithRatios:function(t,e,n,i){const r=1-t,o=n,s=e;let c,a=o[0],u=o[1],l=o[2],h=o[3];return a*=r,u*=t,2===s.length?(c=a+u,{x:(a*s[0].x+u*s[1].x)/c,y:(a*s[0].y+u*s[1].y)/c,z:!!i&&(a*s[0].z+u*s[1].z)/c,t}):(a*=r,u*=2*r,l*=t*t,3===s.length?(c=a+u+l,{x:(a*s[0].x+u*s[1].x+l*s[2].x)/c,y:(a*s[0].y+u*s[1].y+l*s[2].y)/c,z:!!i&&(a*s[0].z+u*s[1].z+l*s[2].z)/c,t}):(a*=r,u*=1.5*r,l*=3*r,h*=t*t*t,4===s.length?(c=a+u+l+h,{x:(a*s[0].x+u*s[1].x+l*s[2].x+h*s[3].x)/c,y:(a*s[0].y+u*s[1].y+l*s[2].y+h*s[3].y)/c,z:!!i&&(a*s[0].z+u*s[1].z+l*s[2].z+h*s[3].z)/c,t}):void 0))},derive:function(t,e){const n=[];for(let i=t,r=i.length,o=r-1;r>1;r--,o--){const t=[];for(let n,r=0;r<o;r++)n={x:o*(i[r+1].x-i[r].x),y:o*(i[r+1].y-i[r].y)},e&&(n.z=o*(i[r+1].z-i[r].z)),t.push(n);n.push(t),i=t}return n},between:function(t,e,n){return e<=t&&t<=n||g.approximately(t,e)||g.approximately(t,n)},approximately:function(t,e,n){return i(t-e)<=(n||1e-6)},length:function(t){const e=g.Tvalues.length;let n=0;for(let i,r=0;r<e;r++)i=.5*g.Tvalues[r]+.5,n+=g.Cvalues[r]*g.arcfn(i,t);return.5*n},map:function(t,e,n,i,r){return i+(t-e)/(n-e)*(r-i)},lerp:function(t,e,n){const i={x:e.x+t*(n.x-e.x),y:e.y+t*(n.y-e.y)};return void 0!==e.z&&void 0!==n.z&&(i.z=e.z+t*(n.z-e.z)),i},pointToString:function(t){let e=t.x+"/"+t.y;return void 0!==t.z&&(e+="/"+t.z),e},pointsToString:function(t){return"["+t.map(g.pointToString).join(", ")+"]"},copy:function(t){return JSON.parse(JSON.stringify(t))},angle:function(t,e,n){const i=e.x-t.x,r=e.y-t.y,o=n.x-t.x,s=n.y-t.y;return c(i*s-r*o,i*o+r*s)},round:function(t,e){const n=""+t,i=n.indexOf(".");return parseFloat(n.substring(0,i+1+e))},dist:function(t,e){const n=t.x-e.x,i=t.y-e.y;return a(n*n+i*i)},closest:function(t,e){let n,i,r=u(2,63);return t.forEach((function(t,o){i=g.dist(e,t),i<r&&(r=i,n=o)})),{mdist:r,mpos:n}},abcratio:function(t,e){if(2!==e&&3!==e)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;const n=u(t,e)+u(1-t,e);return i((n-1)/n)},projectionratio:function(t,e){if(2!==e&&3!==e)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;const n=u(1-t,e);return n/(u(t,e)+n)},lli8:function(t,e,n,i,r,o,s,c){const a=(t-n)*(o-c)-(e-i)*(r-s);return 0!=a&&{x:((t*i-e*n)*(r-s)-(t-n)*(r*c-o*s))/a,y:((t*i-e*n)*(o-c)-(e-i)*(r*c-o*s))/a}},lli4:function(t,e,n,i){const r=t.x,o=t.y,s=e.x,c=e.y,a=n.x,u=n.y,l=i.x,h=i.y;return g.lli8(r,o,s,c,a,u,l,h)},lli:function(t,e){return g.lli4(t,t.c,e,e.c)},makeline:function(t,e){return new P(t.x,t.y,(t.x+e.x)/2,(t.y+e.y)/2,e.x,e.y)},findbbox:function(t){let e=f,n=f,i=p,r=p;return t.forEach((function(t){const o=t.bbox();e>o.x.min&&(e=o.x.min),n>o.y.min&&(n=o.y.min),i<o.x.max&&(i=o.x.max),r<o.y.max&&(r=o.y.max)})),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:n,mid:(n+r)/2,max:r,size:r-n}}},shapeintersections:function(t,e,n,i,r){if(!g.bboxoverlap(e,i))return[];const o=[],s=[t.startcap,t.forward,t.back,t.endcap],c=[n.startcap,n.forward,n.back,n.endcap];return s.forEach((function(e){e.virtual||c.forEach((function(i){if(i.virtual)return;const s=e.intersects(i,r);s.length>0&&(s.c1=e,s.c2=i,s.s1=t,s.s2=n,o.push(s))}))})),o},makeshape:function(t,e,n){const i=e.points.length,r=t.points.length,o=g.makeline(e.points[i-1],t.points[0]),s=g.makeline(t.points[r-1],e.points[0]),c={startcap:o,forward:t,back:e,endcap:s,bbox:g.findbbox([o,t,e,s]),intersections:function(t){return g.shapeintersections(c,c.bbox,t,t.bbox,n)}};return c},getminmax:function(t,e,n){if(!n)return{min:0,max:0};let i,r,o=f,s=p;-1===n.indexOf(0)&&(n=[0].concat(n)),-1===n.indexOf(1)&&n.push(1);for(let c=0,a=n.length;c<a;c++)i=n[c],r=t.get(i),r[e]<o&&(o=r[e]),r[e]>s&&(s=r[e]);return{min:o,mid:(o+s)/2,max:s,size:s-o}},align:function(t,e){const n=e.p1.x,i=e.p1.y,s=-c(e.p2.y-i,e.p2.x-n);return t.map((function(t){return{x:(t.x-n)*r(s)-(t.y-i)*o(s),y:(t.x-n)*o(s)+(t.y-i)*r(s)}}))},roots:function(t,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const n=t.length-1,i=g.align(t,e),o=function(t){return 0<=t&&t<=1};if(2===n){const t=i[0].y,e=i[1].y,n=i[2].y,r=t-2*e+n;if(0!==r){const i=-a(e*e-t*n),s=-t+e;return[-(i+s)/r,-(-i+s)/r].filter(o)}return e!==n&&0===r?[(2*e-n)/(2*e-2*n)].filter(o):[]}const c=i[0].y,u=i[1].y,h=i[2].y;let y=3*u-c-3*h+i[3].y,f=3*c-6*u+3*h,p=-3*c+3*u,d=c;if(g.approximately(y,0)){if(g.approximately(f,0))return g.approximately(p,0)?[]:[-d/p].filter(o);const t=a(p*p-4*f*d),e=2*f;return[(t-p)/e,(-p-t)/e].filter(o)}f/=y,p/=y,d/=y;const m=(3*p-f*f)/3,v=m/3,z=(2*f*f*f-9*f*p+27*d)/27,b=z/2,_=b*b+v*v*v;let w,k,E,S,P;if(_<0){const t=-m/3,e=a(t*t*t),n=-z/(2*e),i=s(n<-1?-1:n>1?1:n),c=2*l(e);return E=c*r(i/3)-f/3,S=c*r((i+x)/3)-f/3,P=c*r((i+2*x)/3)-f/3,[E,S,P].filter(o)}if(0===_)return w=b<0?l(-b):-l(b),E=2*w-f/3,S=-w-f/3,[E,S].filter(o);{const t=a(_);return w=l(-b+t),k=l(b+t),[w-k-f/3].filter(o)}},droots:function(t){if(3===t.length){const e=t[0],n=t[1],i=t[2],r=e-2*n+i;if(0!==r){const t=-a(n*n-e*i),o=-e+n;return[-(t+o)/r,-(-t+o)/r]}return n!==i&&0===r?[(2*n-i)/(2*(n-i))]:[]}if(2===t.length){const e=t[0],n=t[1];return e!==n?[e/(e-n)]:[]}return[]},curvature:function(t,e,n,r,o){let s,c,l,h,x=0,y=0;const f=g.compute(t,e),p=g.compute(t,n),d=f.x*f.x+f.y*f.y;if(r?(s=a(u(f.y*p.z-p.y*f.z,2)+u(f.z*p.x-p.z*f.x,2)+u(f.x*p.y-p.x*f.y,2)),c=u(d+f.z*f.z,1.5)):(s=f.x*p.y-f.y*p.x,c=u(d,1.5)),0===s||0===c)return{k:0,r:0};if(x=s/c,y=c/s,!o){const o=g.curvature(t-.001,e,n,r,!0).k,s=g.curvature(t+.001,e,n,r,!0).k;h=(s-x+(x-o))/2,l=(i(s-x)+i(x-o))/2}return{k:x,r:y,dk:h,adk:l}},inflections:function(t){if(t.length<4)return[];const e=g.align(t,{p1:t[0],p2:t.slice(-1)[0]}),n=e[2].x*e[1].y,i=e[3].x*e[1].y,r=e[1].x*e[2].y,o=18*(-3*n+2*i+3*r-e[3].x*e[2].y),s=18*(3*n-i-3*r),c=18*(r-n);if(g.approximately(o,0)){if(!g.approximately(s,0)){let t=-c/s;if(0<=t&&t<=1)return[t]}return[]}const a=s*s-4*o*c,u=Math.sqrt(a),l=2*o;return g.approximately(l,0)?[]:[(u-s)/l,-(s+u)/l].filter((function(t){return 0<=t&&t<=1}))},bboxoverlap:function(t,e){const n=["x","y"],r=n.length;for(let o,s,c,a,u=0;u<r;u++)if(o=n[u],s=t[o].mid,c=e[o].mid,a=(t[o].size+e[o].size)/2,i(s-c)>=a)return!1;return!0},expandbox:function(t,e){e.x.min<t.x.min&&(t.x.min=e.x.min),e.y.min<t.y.min&&(t.y.min=e.y.min),e.z&&e.z.min<t.z.min&&(t.z.min=e.z.min),e.x.max>t.x.max&&(t.x.max=e.x.max),e.y.max>t.y.max&&(t.y.max=e.y.max),e.z&&e.z.max>t.z.max&&(t.z.max=e.z.max),t.x.mid=(t.x.min+t.x.max)/2,t.y.mid=(t.y.min+t.y.max)/2,t.z&&(t.z.mid=(t.z.min+t.z.max)/2),t.x.size=t.x.max-t.x.min,t.y.size=t.y.max-t.y.min,t.z&&(t.z.size=t.z.max-t.z.min)},pairiteration:function(t,e,n){const i=t.bbox(),r=e.bbox(),o=1e5,s=n||.5;if(i.x.size+i.y.size<s&&r.x.size+r.y.size<s)return[(o*(t._t1+t._t2)/2|0)/o+"/"+(o*(e._t1+e._t2)/2|0)/o];let c=t.split(.5),a=e.split(.5),u=[{left:c.left,right:a.left},{left:c.left,right:a.right},{left:c.right,right:a.right},{left:c.right,right:a.left}];u=u.filter((function(t){return g.bboxoverlap(t.left.bbox(),t.right.bbox())}));let l=[];return 0===u.length||(u.forEach((function(t){l=l.concat(g.pairiteration(t.left,t.right,s))})),l=l.filter((function(t,e){return l.indexOf(t)===e}))),l},getccenter:function(t,e,n){const i=e.x-t.x,s=e.y-t.y,a=n.x-e.x,u=n.y-e.y,l=i*r(y)-s*o(y),h=i*o(y)+s*r(y),f=a*r(y)-u*o(y),p=a*o(y)+u*r(y),d=(t.x+e.x)/2,m=(t.y+e.y)/2,v=(e.x+n.x)/2,z=(e.y+n.y)/2,b=d+l,_=m+h,w=v+f,k=z+p,E=g.lli8(d,m,b,_,v,z,w,k),S=g.dist(E,t);let P,C=c(t.y-E.y,t.x-E.x),T=c(e.y-E.y,e.x-E.x),A=c(n.y-E.y,n.x-E.x);return C<A?((C>T||T>A)&&(C+=x),C>A&&(P=A,A=C,C=P)):A<T&&T<C?(P=A,A=C,C=P):A+=x,E.s=C,E.e=A,E.r=S,E},numberSort:function(t,e){return t-e}};class m{constructor(t){this.curves=[],this._3d=!1,t&&(this.curves=t,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map((function(t){return g.pointsToString(t.points)})).join(", ")+"]"}addCurve(t){this.curves.push(t),this._3d=this._3d||t._3d}length(){return this.curves.map((function(t){return t.length()})).reduce((function(t,e){return t+e}))}curve(t){return this.curves[t]}bbox(){const t=this.curves;for(var e=t[0].bbox(),n=1;n<t.length;n++)g.expandbox(e,t[n].bbox());return e}offset(t){const e=[];return this.curves.forEach((function(n){e.push(...n.offset(t))})),new m(e)}}const{abs:v,min:z,max:b,cos:_,sin:w,acos:k,sqrt:E}=Math,S=Math.PI;class P{constructor(t){let e=t&&t.forEach?t:Array.from(arguments).slice(),n=!1;if("object"==typeof e[0]){n=e.length;const t=[];e.forEach((function(e){["x","y","z"].forEach((function(n){void 0!==e[n]&&t.push(e[n])}))})),e=t}let i=!1;const r=e.length;if(n){if(n>4){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(6!==r&&8!==r&&9!==r&&12!==r&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const o=this._3d=!i&&(9===r||12===r)||t&&t[0]&&void 0!==t[0].z,s=this.points=[];for(let t=0,n=o?3:2;t<r;t+=n){var c={x:e[t],y:e[t+1]};o&&(c.z=e[t+2]),s.push(c)}const a=this.order=s.length-1,u=this.dims=["x","y"];o&&u.push("z"),this.dimlen=u.length;const l=g.align(s,{p1:s[0],p2:s[a]}),h=g.dist(s[0],s[a]);this._linear=l.reduce(((t,e)=>t+v(e.y)),0)<h/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(t,e,n,i){if(void 0===i&&(i=.5),0===i)return new P(e,e,n);if(1===i)return new P(t,e,e);const r=P.getABC(2,t,e,n,i);return new P(t,r.A,n)}static cubicFromPoints(t,e,n,i,r){void 0===i&&(i=.5);const o=P.getABC(3,t,e,n,i);void 0===r&&(r=g.dist(e,o.C));const s=r*(1-i)/i,c=g.dist(t,n),a=(n.x-t.x)/c,u=(n.y-t.y)/c,l=r*a,h=r*u,x=s*a,y=s*u,f=e.x-l,p=e.y-h,d=e.x+x,m=e.y+y,v=o.A,z=v.x+(f-v.x)/(1-i),b=v.y+(p-v.y)/(1-i),_=v.x+(d-v.x)/i,w=v.y+(m-v.y)/i,k={x:t.x+(z-t.x)/i,y:t.y+(b-t.y)/i},E={x:n.x+(_-n.x)/(1-i),y:n.y+(w-n.y)/(1-i)};return new P(t,k,E,n)}static getUtils(){return g}getUtils(){return P.getUtils()}static get PolyBezier(){return m}valueOf(){return this.toString()}toString(){return g.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const t=this.points,e=["M",t[0].x,t[0].y,2===this.order?"Q":"C"];for(let n=1,i=t.length;n<i;n++)e.push(t[n].x),e.push(t[n].y);return e.join(" ")}setRatios(t){if(t.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=t,this._lut=[]}verify(){const t=this.coordDigest();t!==this._print&&(this._print=t,this.update())}coordDigest(){return this.points.map((function(t,e){return""+e+t.x+t.y+(t.z?t.z:0)})).join("")}update(){this._lut=[],this.dpoints=g.derive(this.points,this._3d),this.computedirection()}computedirection(){const t=this.points,e=g.angle(t[0],t[this.order],t[1]);this.clockwise=e>0}length(){return g.length(this.derivative.bind(this))}static getABC(t=2,e,n,i,r=.5){const o=g.projectionratio(r,t),s=1-o,c={x:o*e.x+s*i.x,y:o*e.y+s*i.y},a=g.abcratio(r,t);return{A:{x:n.x+(n.x-c.x)/a,y:n.y+(n.y-c.y)/a},B:n,C:c,S:e,E:i}}getABC(t,e){e=e||this.get(t);let n=this.points[0],i=this.points[this.order];return P.getABC(this.order,n,e,i,t)}getLUT(t){if(this.verify(),t=t||100,this._lut.length===t)return this._lut;this._lut=[],t++,this._lut=[];for(let e,n,i=0;i<t;i++)n=i/(t-1),e=this.compute(n),e.t=n,this._lut.push(e);return this._lut}on(e,n){n=n||5;const i=this.getLUT(),r=[];for(let t,o=0,s=0;o<i.length;o++)t=i[o],g.dist(t,e)<n&&(r.push(t),s+=o/i.length);return!!r.length&&(t/=r.length)}project(t){const e=this.getLUT(),n=e.length-1,i=g.closest(e,t),r=i.mpos,o=(r-1)/n,s=(r+1)/n,c=.1/n;let a,u,l=i.mdist,h=o,x=h;for(l+=1;h<s+c;h+=c)a=this.compute(h),u=g.dist(t,a),u<l&&(l=u,x=h);return x=x<0?0:x>1?1:x,a=this.compute(x),a.t=x,a.d=l,a}get(t){return this.compute(t)}point(t){return this.points[t]}compute(t){return this.ratios?g.computeWithRatios(t,this.points,this.ratios,this._3d):g.compute(t,this.points,this._3d,this.ratios)}raise(){const t=this.points,e=[t[0]],n=t.length;for(let i,r,o=1;o<n;o++)i=t[o],r=t[o-1],e[o]={x:(n-o)/n*i.x+o/n*r.x,y:(n-o)/n*i.y+o/n*r.y};return e[n]=t[n-1],new P(e)}derivative(t){return g.compute(t,this.dpoints[0],this._3d)}dderivative(t){return g.compute(t,this.dpoints[1],this._3d)}align(){let t=this.points;return new P(g.align(t,{p1:t[0],p2:t[t.length-1]}))}curvature(t){return g.curvature(t,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return g.inflections(this.points)}normal(t){return this._3d?this.__normal3(t):this.__normal2(t)}__normal2(t){const e=this.derivative(t),n=E(e.x*e.x+e.y*e.y);return{x:-e.y/n,y:e.x/n}}__normal3(t){const e=this.derivative(t),n=this.derivative(t+.01),i=E(e.x*e.x+e.y*e.y+e.z*e.z),r=E(n.x*n.x+n.y*n.y+n.z*n.z);e.x/=i,e.y/=i,e.z/=i,n.x/=r,n.y/=r,n.z/=r;const o={x:n.y*e.z-n.z*e.y,y:n.z*e.x-n.x*e.z,z:n.x*e.y-n.y*e.x},s=E(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=s,o.y/=s,o.z/=s;const c=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{x:c[0]*e.x+c[1]*e.y+c[2]*e.z,y:c[3]*e.x+c[4]*e.y+c[5]*e.z,z:c[6]*e.x+c[7]*e.y+c[8]*e.z}}hull(t){let e=this.points,n=[],i=[],r=0;for(i[r++]=e[0],i[r++]=e[1],i[r++]=e[2],3===this.order&&(i[r++]=e[3]);e.length>1;){n=[];for(let o,s=0,c=e.length-1;s<c;s++)o=g.lerp(t,e[s],e[s+1]),i[r++]=o,n.push(o);e=n}return i}split(t,e){if(0===t&&e)return this.split(e).left;if(1===e)return this.split(t).right;const n=this.hull(t),i={left:2===this.order?new P([n[0],n[3],n[5]]):new P([n[0],n[4],n[7],n[9]]),right:2===this.order?new P([n[5],n[4],n[2]]):new P([n[9],n[8],n[6],n[3]]),span:n};return i.left._t1=g.map(0,0,1,this._t1,this._t2),i.left._t2=g.map(t,0,1,this._t1,this._t2),i.right._t1=g.map(t,0,1,this._t1,this._t2),i.right._t2=g.map(1,0,1,this._t1,this._t2),e?(e=g.map(e,t,1,0,1),i.right.split(e).left):i}extrema(){const t={};let e=[];return this.dims.forEach(function(n){let i=function(t){return t[n]},r=this.dpoints[0].map(i);t[n]=g.droots(r),3===this.order&&(r=this.dpoints[1].map(i),t[n]=t[n].concat(g.droots(r))),t[n]=t[n].filter((function(t){return t>=0&&t<=1})),e=e.concat(t[n].sort(g.numberSort))}.bind(this)),t.values=e.sort(g.numberSort).filter((function(t,n){return e.indexOf(t)===n})),t}bbox(){const t=this.extrema(),e={};return this.dims.forEach(function(n){e[n]=g.getminmax(this,n,t[n])}.bind(this)),e}overlaps(t){const e=this.bbox(),n=t.bbox();return g.bboxoverlap(e,n)}offset(t,e){if(void 0!==e){const n=this.get(t),i=this.normal(t),r={c:n,n:i,x:n.x+i.x*e,y:n.y+i.y*e};return this._3d&&(r.z=n.z+i.z*e),r}if(this._linear){const e=this.normal(0),n=this.points.map((function(n){const i={x:n.x+t*e.x,y:n.y+t*e.y};return n.z&&e.z&&(i.z=n.z+t*e.z),i}));return[new P(n)]}return this.reduce().map((function(e){return e._linear?e.offset(t)[0]:e.scale(t)}))}simple(){if(3===this.order){const t=g.angle(this.points[0],this.points[3],this.points[1]),e=g.angle(this.points[0],this.points[3],this.points[2]);if(t>0&&e<0||t<0&&e>0)return!1}const t=this.normal(0),e=this.normal(1);let n=t.x*e.x+t.y*e.y;return this._3d&&(n+=t.z*e.z),v(k(n))<S/3}reduce(){let t,e,n=0,i=0,r=.01,o=[],s=[],c=this.extrema().values;for(-1===c.indexOf(0)&&(c=[0].concat(c)),-1===c.indexOf(1)&&c.push(1),n=c[0],t=1;t<c.length;t++)i=c[t],e=this.split(n,i),e._t1=n,e._t2=i,o.push(e),n=i;return o.forEach((function(t){for(n=0,i=0;i<=1;)for(i=n+r;i<=1.01;i+=r)if(e=t.split(n,i),!e.simple()){if(i-=r,v(n-i)<r)return[];e=t.split(n,i),e._t1=g.map(n,0,1,t._t1,t._t2),e._t2=g.map(i,0,1,t._t1,t._t2),s.push(e),n=i;break}n<1&&(e=t.split(n,1),e._t1=g.map(n,0,1,t._t1,t._t2),e._t2=t._t2,s.push(e))})),s}translate(t,e,n){n="number"==typeof n?n:e;const i=this.order;let r=this.points.map(((t,r)=>(1-r/i)*e+r/i*n));return new P(this.points.map(((e,n)=>({x:e.x+t.x*r[n],y:e.y+t.y*r[n]}))))}scale(t){const e=this.order;let n=!1;if("function"==typeof t&&(n=t),n&&2===e)return this.raise().scale(n);const i=this.clockwise,r=this.points;if(this._linear)return this.translate(this.normal(0),n?n(0):t,n?n(1):t);const o=n?n(0):t,s=n?n(1):t,c=[this.offset(0,10),this.offset(1,10)],a=[],u=g.lli4(c[0],c[0].c,c[1],c[1].c);if(!u)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach((function(t){const n=a[t*e]=g.copy(r[t*e]);n.x+=(t?s:o)*c[t].n.x,n.y+=(t?s:o)*c[t].n.y})),n?([0,1].forEach((function(o){if(2!==e||!o){var s=r[o+1],c={x:s.x-u.x,y:s.y-u.y},l=n?n((o+1)/e):t;n&&!i&&(l=-l);var h=E(c.x*c.x+c.y*c.y);c.x/=h,c.y/=h,a[o+1]={x:s.x+l*c.x,y:s.y+l*c.y}}})),new P(a)):([0,1].forEach((t=>{if(2===e&&t)return;const n=a[t*e],i=this.derivative(t),o={x:n.x+i.x,y:n.y+i.y};a[t+1]=g.lli4(n,o,u,r[t+1])})),new P(a))}outline(t,e,n,i){if(e=void 0===e?t:e,this._linear){const r=this.normal(0),o=this.points[0],s=this.points[this.points.length-1];let c,a,u;void 0===n&&(n=t,i=e),c={x:o.x+r.x*t,y:o.y+r.y*t},u={x:s.x+r.x*n,y:s.y+r.y*n},a={x:(c.x+u.x)/2,y:(c.y+u.y)/2};const l=[c,a,u];c={x:o.x-r.x*e,y:o.y-r.y*e},u={x:s.x-r.x*i,y:s.y-r.y*i},a={x:(c.x+u.x)/2,y:(c.y+u.y)/2};const h=[u,a,c],x=g.makeline(h[2],l[0]),y=g.makeline(l[2],h[0]),f=[x,new P(l),y,new P(h)];return new m(f)}const r=this.reduce(),o=r.length,s=[];let c,a=[],u=0,l=this.length();const h=void 0!==n&&void 0!==i;function x(t,e,n,i,r){return function(o){const s=i/n,c=(i+r)/n,a=e-t;return g.map(o,0,1,t+s*a,t+c*a)}}r.forEach((function(r){const o=r.length();h?(s.push(r.scale(x(t,n,l,u,o))),a.push(r.scale(x(-e,-i,l,u,o)))):(s.push(r.scale(t)),a.push(r.scale(-e))),u+=o})),a=a.map((function(t){return c=t.points,c[3]?t.points=[c[3],c[2],c[1],c[0]]:t.points=[c[2],c[1],c[0]],t})).reverse();const y=s[0].points[0],f=s[o-1].points[s[o-1].points.length-1],p=a[o-1].points[a[o-1].points.length-1],d=a[0].points[0],v=g.makeline(p,y),z=g.makeline(f,d),b=[v].concat(s).concat([z]).concat(a);return new m(b)}outlineshapes(t,e,n){e=e||t;const i=this.outline(t,e).curves,r=[];for(let t=1,e=i.length;t<e/2;t++){const o=g.makeshape(i[t],i[e-t],n);o.startcap.virtual=t>1,o.endcap.virtual=t<e/2-1,r.push(o)}return r}intersects(t,e){return t?t.p1&&t.p2?this.lineIntersects(t):(t instanceof P&&(t=t.reduce()),this.curveintersects(this.reduce(),t,e)):this.selfintersects(e)}lineIntersects(t){const e=z(t.p1.x,t.p2.x),n=z(t.p1.y,t.p2.y),i=b(t.p1.x,t.p2.x),r=b(t.p1.y,t.p2.y);return g.roots(this.points,t).filter((t=>{var o=this.get(t);return g.between(o.x,e,i)&&g.between(o.y,n,r)}))}selfintersects(t){const e=this.reduce(),n=e.length-2,i=[];for(let r,o,s,c=0;c<n;c++)o=e.slice(c,c+1),s=e.slice(c+2),r=this.curveintersects(o,s,t),i.push(...r);return i}curveintersects(t,e,n){const i=[];t.forEach((function(t){e.forEach((function(e){t.overlaps(e)&&i.push({left:t,right:e})}))}));let r=[];return i.forEach((function(t){const e=g.pairiteration(t.left,t.right,n);e.length>0&&(r=r.concat(e))})),r}arcs(t){return t=t||.5,this._iterate(t,[])}_error(t,e,n,i){const r=(i-n)/4,o=this.get(n+r),s=this.get(i-r),c=g.dist(t,e),a=g.dist(t,o),u=g.dist(t,s);return v(a-c)+v(u-c)}_iterate(t,e){let n,i=0,r=1;do{n=0,r=1;let o,s,c,a,u,l=this.get(i),h=!1,x=!1,y=r,f=1;do{if(x=h,a=c,y=(i+r)/2,o=this.get(y),s=this.get(r),c=g.getccenter(l,o,s),c.interval={start:i,end:r},h=this._error(c,l,i,r)<=t,u=x&&!h,u||(f=r),h){if(r>=1){if(c.interval.end=f=1,a=c,r>1){let t={x:c.x+c.r*_(c.e),y:c.y+c.r*w(c.e)};c.e+=g.angle({x:c.x,y:c.y},t,this.get(1))}break}r+=(r-i)/2}else r=y}while(!u&&n++<100);if(n>=100)break;a=a||c,e.push(a),i=f}while(r<1);return e}}n.Bezier=P}},n={};function i(t){var r=n[t];if(void 0!==r)return r.exports;var o=n[t]={exports:{}};return e[t](o,o.exports,i),o.exports}var r={};return(()=>{var t=r;Object.defineProperty(t,"__esModule",{value:!0});var e=i(607);i(62);var n,o,s=[],c=document.querySelector("#cvs"),a=c.getContext("2d"),u=document.querySelector("#rangeDelay"),l=document.querySelector("#rangeMaxWidth"),h=document.querySelector("#rangeMinWidth"),x=document.querySelector("#rangeTension"),y=document.querySelector("#rangeOpacity"),f=document.querySelector("#rangeColorRed"),p=document.querySelector("#rangeColorGreen"),d=document.querySelector("#rangeColorBlue"),g=document.querySelector("#colorBox"),m=document.querySelector("#chkRoundCap"),v=c.getBoundingClientRect(),z=(o=(n=a).backingStorePixelRatio||n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1,(window.devicePixelRatio||1)/o),b=!1;function _(){a.clearRect(0,0,c.width,c.height),(s=(0,e.drainPoints)(s)).length<3?b=!1:(b=!0,(0,e.drawLaserPen)(a,s),requestAnimationFrame(_))}function w(t){var n=t.target,i=k(n);try{var r=parseFloat(i);switch(n.id){case u.id:(0,e.setDelay)(1e3*r);break;case l.id:(0,e.setMaxWidth)(r);break;case h.id:(0,e.setMinWidth)(r);break;case x.id:(0,e.setTension)(r);break;case y.id:(0,e.setOpacity)(r);break;case f.id:case p.id:case d.id:E(),(0,e.setColor)(parseInt(f.value,10),parseInt(p.value,10),parseInt(d.value,10))}}catch(t){console.error("set params error:",t)}}function k(t){var e=t.value.toString(),n="".concat(t.id,"Value"),i=document.querySelector("#".concat(n));return i&&(i.textContent=e),e}function E(){g.style.backgroundColor="rgb(".concat(f.value,",").concat(p.value,",").concat(d.value,")")}function S(){var t=c.getBoundingClientRect();c.setAttribute("width","".concat(t.width*z,"px")),c.setAttribute("height","".concat(t.height*z,"px")),a.scale(z,z)}u.addEventListener("input",w),l.addEventListener("input",w),h.addEventListener("input",w),x.addEventListener("input",w),y.addEventListener("input",w),f.addEventListener("input",w),p.addEventListener("input",w),d.addEventListener("input",w),m.addEventListener("change",(function(){(0,e.setRoundCap)(m.checked)})),document.addEventListener("mousemove",(function(t){var e=t.clientX-v.x,n=t.clientY-v.y;s.push({x:e,y:n,time:Date.now()}),b||_()})),window.addEventListener("resize",S),S(),k(u),k(l),k(h),k(x),k(y),E()})(),r})()}));